/**
 * Created by LiuJie on 2016/4/19.
 */
!function(e){e.fn.dataTable=function(t,a){var r=this.selector,i={filedId:"id",url:"",table_selector:r,rownumber:!1,checkrow:!0,singleSelect:!1,editor:!1,queryParams:{},pageParams:{page:1,rows:10},pagination:!0,_params:a,visitDomain:"",rowsObjs:null,data:[],columns:[],detailsColumn:[],operations:[],footer:{showFooter:!1,idKey:"",foots:[]},isDeleteRows:!1,onLoadSuccess:null,onClick:null,dbOnClick:null,deleteFn:null,onDelete:null};if("object"==typeof t&&(e(r).data("setting")?function(){i=e.extend(e(r).data("setting"),t)}():function(){i=e.extend(i,t),e(r).data("setting",i)}(),i.pagination&&(i.queryParams.rows=i.pageParams.rows,i.queryParams.page=i.pageParams.page),e.gridMethod.initTable(r),i.editor?e.gridMethod.createEditTable(r,i):e.gridMethod.createTable(r,i)),"string"==typeof t){if("getSelected"==t){var l=e(r).data("setting")?e(r).data("setting"):i;l.rowsObjs=e(r).data("_table");var n=e.gridMethod.getSelected(l);return n}if("getSelections"==t){var l=e(r).data("setting")?e(r).data("setting"):i;l.rowsObjs=e(r).data("_table");var d=e.gridMethod.getSelections(l);return d}if("reload"==t){e(r).data("isPage",!1);var l=e(r).data("setting")?e(r).data("setting"):i;l.pageParams.page=1,l.pageParams.rows=10,e.gridMethod.reload(l)}if("getRowsNumber"==t){var l=e(r).data("setting")?e(r).data("setting"):i,s=e.gridMethod.getRowsNumber(l);return s}if("search"==t){e(r).data("isPage",!1);var l=e(r).data("setting")?e(r).data("setting"):i;for(var o in a)l.queryParams[""+o]=a[o];e.gridMethod.reload(l)}if("getPager"==t){var f={pager:0,rows:10},l=e(r).data("setting")?e(r).data("setting"):i;return f.pager=l.pageParams.page,f.rows=l.pageParams.rows,f}if("load"==t){e(r).data("isPage",!1);var l=e(r).data("setting")?e(r).data("setting"):i;l.pageParams.page=1,l.pageParams.rows=10,l.data=a,e.gridMethod.loadLocalData(l)}if("getRows"==t){var l=e(r).data("setting")?e(r).data("setting"):i;l.rowsObjs=e(r).data("_table");var n=e.gridMethod.getRows(l);return n}if("selectionRow"==t){var l=e(r).data("setting")?e(r).data("setting"):i;l.rowsObjs=e(r).data("_table"),e.gridMethod.selectionRow(l,a)}if("getEditRowData"==t){var l=e(r).data("setting")?e(r).data("setting"):i;return l.rowsObjs=e(r).data("_table"),e.gridMethod.getEditRowData(l,a)}if("deleteRowById"==t){e(r).data("isPage",!1);var l=e(r).data("setting")?e(r).data("setting"):i;l.pageParams.page=1,l.pageParams.rows=10,e.gridMethod.deleteRowById(l,a)}if("selectAll"==t){var l=e(r).data("setting")?e(r).data("setting"):i;l.rowsObjs=e(r).data("_table"),e.gridMethod.selectAll(l,a)}if("cancelSelectAll"==t){var l=e(r).data("setting")?e(r).data("setting"):i;l.rowsObjs=e(r).data("_table"),e.gridMethod.cancelSelectAll(l,a)}if("getRow"==t){var l=e(r).data("setting")?e(r).data("setting"):i;return l.rowsObjs=e(r).data("_table"),e.gridMethod.getRow(l,a)}}},e.fn.validateTable=function(t){var a=this.selector,r=e(a).find(":text");if(r&&r.length>0){for(var i=0;i<r.length;i++){var l=e(r[i]).attr("validation"),n=e(r[i]).attr("filed-role"),d=l.split(",");if(d&&d.length>0)for(var s=0;s<d.length;s++){var o,f=d[s].split("["),p=[];if(f.length>1){var g;if(o=f[0],g=f[1].split("]"),-1!=g[0].indexOf(";")){var c=g[0].split(";");if(c&&c.length>0)for(var v in c)p.push(parseInt(c[v]))}else{var h=parseInt(g[0]);p.push(h)}}else o=f[0];var u=$validateRules[o];if(u&&u.validator){var m,b=u.validator,_=e(r[i]).val();if(m=p.length>0?b(_,p):b(_),!m){var x,y=u.message;if(-1!=y.indexOf("]")){var w=y.split("]");w&&w.length>0&&(x=w[1]?n+w[1]:n+w[0])}if(-1!=y.indexOf("}")){x=y;for(var T in p)x=x.replaceAll("\\{"+T+"\\}",p[T]);x=n+x}return e("#error-box")&&0==e("#error-box").length&&e("body").find("div.wrap").append(e.validateTemplate),e("#error-box").show(),e("#content-box").text(x),setTimeout(function(){e("#error-box").is(":visible")&&e("#error-box").hide()},3e3),!1}}}}t()}},e.extend({gridTemplate:{tableTemplate:"<thead class='_thead'><tr></tr></thead><tbody class='_tbody'></tbody>",trOddTemplate:'<tr class="_summary" rowIndex="" filedId=""></tr>',trEvenTemplate:'<tr class="table-color _summary" rowIndex="" filedId=""></tr>',tdTemplate:'<td filed=""></td>',thTemplate:"<th></th>",tfootTemplate:'<tr class="table-page-box _tfoot"></tr>',delTemplate:'<span class="icon del delete_rows"></span>',tableTotalTemplate:'<tr class="table-total footer_total"></tr>',check_td_tem:'<td idkey="checkbox"><span class="icon choice-box check_box"></span></td>'},editGrid:{getTemByType:function(e){var t=e?e:"text",a=["text"],r=['<span style="display: none"></span><input type="text">'];for(var i in a)if(t==a[i])return r[i]},getValueType:function(e,t){if(!t)return e;if(null==e&&void 0==e)return e;var a=["int","float"],r=[parseInt,parseFloat];for(var i in a)if(t[0]==a[i])return t[1]?r[i](e).toFixed(t[1]):r[i](e);return e}},gridMethod:{initTable:function(t){var a=e(t).find("._thead"),r=e(t).find("._tbody");0==e(a).length&&0==e(r).length?e(t).append(e.gridTemplate.tableTemplate):(e(a).remove(),e(r).remove(),e(t).append(e.gridTemplate.tableTemplate))},createTable:function(t,a){var r,i=e.gridTemplate.thTemplate,l=(e.gridTemplate.tfootTemplate,e(t).find("._thead").children("tr")),n=e(t).find("._tbody");if(a.columns.length>0){if(r=a.columns,a.checkrow){e(l).append(i);for(var d=0;d<r.length;d++){e(l).append(i);var s=e(l).find("th");e(s[d+1]).attr("filed",r[d].filed),e(s[d+1]).text(r[d].title)}}else for(var d=0;d<r.length;d++){e(l).append(i);var s=e(l).find("th");e(s[d]).attr("filed",r[d].filed),e(s[d]).text(r[d].title)}e.ajax({url:a.url,dataType:"json",type:"post",data:a.queryParams,async:!0,cache:!1,success:function(d){if(d){var s,o,f,p;if(d.rows)s=d.rows,o=d.total;else{if(!d.result||"SUCCESS"!=d.result){var g='<tr><td style="text-align: center" colspan="'+r.length+'">抱歉！请求服务器数据失败 错误原因：'+d.message+"</td></tr>";return e(n).append(g),!1}s=d.data.rows,o=d.data.total,d.data.usedPay&&(f=d.data.usedPay),d.data.sumTotal&&(p=d.data.sumTotal),d.data.footer&&(p=d.data.footer)}if(s.length>0){e(t).data("_table",s);for(var c=0;c<s.length;c++){var v=s[c],h=v[a.filedId],u=parseInt(c+1),m=e.gridTemplate.trOddTemplate;u%2==0&&(m=e.gridTemplate.trEvenTemplate),e(n).append(m);var b=e(n).find("tr"),_=b[c];e(_).attr("rowIndex",c),e(_).attr("filedId",h),a.checkrow&&e(_).append(e.gridTemplate.check_td_tem);for(var x=0;x<r.length;x++){var y=e.gridTemplate.tdTemplate;for(var w in v)if(w==r[x].filed){e(_).append(y);var T,P=e(_).find("td");if(T=a.checkrow?P[x+1]:P[x],v[w]?e(T).text(v[w]):0==v[w]?e(T).text("0"):e(T).text("无"),r[x].formatter){var I=r[x].formatter,k=I(v,v[w],u);e(T).html(k)}}}if(f&&f.length>0)for(var C=0;C<f.length;C++){var S=f[C];if(0==c){e(l).append(i);for(var D in S)e(l).find("th").filter(":last").text(S[D])}e(_).append(y);for(var D in S)e(_).find("td").filter(":last").text("￥"+parseFloat(v[D]).toFixed(2))}if(a.operations&&a.operations.length>0){var O=a.operations;0==c&&(e(l).append(i),e(l).find("th").filter(":last").text("操作").attr("colspan",O.length));for(var R=0;R<O.length;R++){e(_).append(y);var T=e(_).find("td").filter(":last");if(e(T).text(""),O[R].formatter){var I=O[R].formatter,k=I(v,"",u);e(T).html(k)}}}if(a.isDeleteRows){e(l).append(i),e(_).append(y);var T=e(_).find("td").filter(":last");e(T).html(e.gridTemplate.delTemplate)}}if(a.footer.showFooter){e(n).append(e.gridTemplate.tableTotalTemplate);var F=e(t).find("th");if(F&&F.length>0){for(var j='<td class="tl total-txt">合计</td>',M=1;M<F.length;M++){var A=e(F[M]).attr("filed");j+=A?'<td class="total-nbm" filed_name="'+A+'"></td>':'<td class="total-nbm"></td>'}if(e(n).find(".footer_total").append(j),a.footer.foots&&a.footer.foots.length>0)for(var V=a.footer.foots,E=0;E<V.length;E++){var L=V[E].name;if(p&&p.length>0){var $=p[0][L];if(V[E].formatter){var q=V[E].formatter;$=q($)}e(n).find(".footer_total").find("td").filter("[filed_name='"+L+"']").text($)}else if("object"==typeof p&&p){var $=p[L];if(V[E].formatter){var q=V[E].formatter;$=q($)}e(n).find(".footer_total").find("td").filter("[filed_name='"+L+"']").text($)}}}}var B=e(t).find("._tfoot");0==B.length&&e(n).append(e.gridTemplate.tfootTemplate);var G=a.pageParams.rows,N=a.pageParams.page,H=e(t).find("th").filter(":last"),K=0;parseInt(e(H).attr("colspan"))>1&&(K=parseInt(e(H).attr("colspan"))-1);var Q=e(t).find("th").length+K;a.pagination&&e.gridPage.init_pageTemplate(t,o,G,N,Q),a.isDeleteRows||e(t).find(".delete_rows").hide();var U=e(t).find("._summary");if(e(U).click(function(){var t=e(this).parents("._tbody").parent("table").attr("id"),r=e(this).find(".check_box");e(r).hasClass("choice-box-yes")?e(r).removeClass("choice-box-yes"):a.singleSelect?(e(e("#"+t).find(".check_box")).removeClass("choice-box-yes"),e(r).addClass("choice-box-yes")):e(r).addClass("choice-box-yes"),a.onClick&&e.isFunction(a.onClick)&&a.onClick()}),e(U).dblclick(function(){var t=e(this).parents("._tbody").parent("table").attr("id"),r=e(this).find(".check_box");e(r).hasClass("choice-box-yes")?e(r).removeClass("choice-box-yes"):a.singleSelect?(e(e("#"+t).find(".check_box")).removeClass("choice-box-yes"),e(r).addClass("choice-box-yes")):e(r).addClass("choice-box-yes"),a.dbOnClick&&e.isFunction(a.dbOnClick)&&a.dbOnClick()}),a.onLoadSuccess&&e.isFunction(a.onLoadSuccess)&&a.onLoadSuccess(),a.isDeleteRows){var z=e(t).find(".delete_rows");z.bind("click",function(){var t=e(this).parents("tr").attr("filedId");a.onDelete&&e.isFunction(a.onDelete)&&a.onDelete(t)})}}else{var g='<tr><td style="text-align: center" colspan="'+r.length+'">没有查询到符合条件的数据！</td></tr>';e(n).append(g)}}else{var g='<tr><td style="text-align: center" colspan="'+r.length+'">没有查询到符合条件的数据！</td></tr>';e(n).append(g)}var J=e(t).data("setting")?e(t).data("setting"):a;J.pageParams.rows=10,J.pageParams.page=0,e(t).data("setting",J)},error:function(t,a,i){console.log("异步请求列表数据异常:"+a);var l='<tr><td style="text-align: center" colspan="'+r.length+'">没有查询到符合条件的数据！</td></tr>';e(n).append(l)}})}},createEditTable:function(t,a){var r,i=e.gridTemplate.thTemplate,l=(e.gridTemplate.tfootTemplate,e(t).find("._thead").children("tr")),n=e(t).find("._tbody");if(a.columns.length>0){r=a.columns,e(l).append(i);for(var d=0;d<r.length;d++){e(l).append(i);var s=e(l).find("th");e(s[d+1]).attr("filed",r[d].filed),e(s[d+1]).text(r[d].title)}var o,f=[];if(a.data){if(f=a.data,o=a.data.length,f.length>0){e(t).data("_table",f);for(var d=0;d<f.length;d++){var p=f[d],g=p[a.filedId],c=parseInt(d+1),v=e.gridTemplate.trOddTemplate;c%2==0&&(v=e.gridTemplate.trEvenTemplate),e(n).append(v);var h=e(n).find("tr"),u=h[d];e(u).attr("rowIndex",d),e(u).attr("filedId",g),e(u).append(e.gridTemplate.check_td_tem);for(var m=0;m<r.length;m++){var b=e.gridTemplate.tdTemplate;if(e(u).append(b),r[m].editor){var _=e.editGrid.getTemByType(r[m].editor.type),x=e(u).find("td"),y=x[m+1];e(y).html(_),e(y).attr("edit","true"),e(y).attr("td_filed",r[m].filed);var w=e(y).find("input"),T=e(y).find("span");r[m].editor.validator.validType&&(e(w).attr("validation",r[m].editor.validator.validType),e(w).attr("filed-role",r[m].editor.validator.name)),r[m].editor.editType&&e(w).attr("editType",r[m].editor.editType),e(w).attr("name",r[m].filed);var P="";for(var I in p)if(I==r[m].filed&&(P=null!=p[I]&&void 0!=p[I]?p[I]:"",r[m].formatter)){var k=r[m].formatter,C=k(p,p[I],c);P=C}r[m].editor.valueType&&(P=e.editGrid.getValueType(P,r[m].editor.valueType)),e(w).val(P),e(T).attr("edit_value",P),e(T).text(P)}else{var x=e(u).find("td"),y=x[m+1],S="无";for(var I in p)if(I==r[m].filed&&(S=null!=p[I]&&void 0!=p[I]?p[I]:"无",r[m].formatter)){var k=r[m].formatter,C=k(p,p[I],c);S=C}e(y).attr("td_filed",r[m].filed),e(y).html(S)}}if(a.operations&&a.operations.length>0){var D=a.operations;0==d&&(e(l).append(i),e(l).find("th").filter(":last").text("操作").attr("colspan",D.length));for(var O=0;O<D.length;O++){e(u).append(b);var y=e(u).find("td").filter(":last");if(e(y).text(""),D[O].formatter){var k=D[O].formatter,C=k(p,"",c);e(y).html(C)}}}if(a.isDeleteRows){e(l).append(i),e(u).append(b);var y=e(u).find("td").filter(":last");e(y).html(e.gridTemplate.delTemplate)}}if(a.footer.showFooter){e(n).append(e.gridTemplate.tableTotalTemplate);var R=e(t).find("th");if(R&&R.length>0){for(var F='<td class="tl total-txt"></td>',j=1;j<R.length;j++){var M=e(R[j]).attr("filed");F+=M?'<td class="total-nbm" filed_name="'+M+'"></td>':'<td class="total-nbm"></td>'}if(e(n).find(".footer_total").append(F),a.footer.foots&&a.footer.foots.length>0)for(var A=a.footer.foots,V=0;V<A.length;V++){var E=A[V].name;if(A[V].isSum)e(n).find(".footer_total").find("td").filter("[filed_name='"+E+"']").text("合计");else{var L=e(n).find("tr._summary").find("td").find("input").filter("[name='"+E+"']"),$=e(n).find("tr._summary").find("td").filter("[td_filed='"+E+"']");if(L&&L.length>0){for(var q=0,B=0;B<L.length;B++)q=parseFloat(q)+parseFloat(e(L[B]).val());e(n).find(".footer_total").find("td").filter("[filed_name='"+E+"']").text(parseFloat(q).toFixed(2))}if($&&$.length>0){for(var G=0,N=0;N<$.length;N++)G=parseFloat(G)+parseFloat(e($[N]).text());e(n).find(".footer_total").find("td").filter("[filed_name='"+E+"']").text(parseFloat(G).toFixed(2))}}}}}var H=e(t).find("._tfoot");0==H.length&&e(n).append(e.gridTemplate.tfootTemplate);var K=a.pageParams.rows,Q=a.pageParams.page,U=e(t).find("th").filter(":last"),z=0;parseInt(e(U).attr("colspan"))>1&&(z=parseInt(e(U).attr("colspan"))-1);var J=e(t).find("th").length+z;a.pagination&&e.gridPage.init_pageTemplate(t,o,K,Q,J),a.isDeleteRows||e(t).find(".delete_rows").hide();var W=e(t).find("._summary");e(W).click(function(){var t=e(this).parents("._tbody").parent("table").attr("id"),r=e(this).find(".check_box");e(r).hasClass("choice-box-yes")?e(r).removeClass("choice-box-yes"):a.singleSelect?(e(e("#"+t).find(".check_box")).removeClass("choice-box-yes"),e(r).addClass("choice-box-yes")):e(r).addClass("choice-box-yes"),a.onClick&&e.isFunction(a.onClick)&&a.onClick()}),e(W).dblclick(function(){var t=e(this).parents("._tbody").parent("table").attr("id"),r=e(this).find(".check_box");e(r).hasClass("choice-box-yes")?e(r).removeClass("choice-box-yes"):a.singleSelect?(e(e("#"+t).find(".check_box")).removeClass("choice-box-yes"),e(r).addClass("choice-box-yes")):e(r).addClass("choice-box-yes"),a.dbOnClick&&e.isFunction(a.dbOnClick)&&a.dbOnClick()});var X=e(t).find("._summary").find("td").find("input").filter("[editType='number']");if(X&&X.length>0&&e(X).bind("keydown",function(e){var t=window.event?e.keyCode:e.which;return t>=48&&57>=t||189==t||190==t||8==t||37==t||39==t||105>=t&&t>=96||110==t?!0:!1}),a.onLoadSuccess&&e.isFunction(a.onLoadSuccess)&&a.onLoadSuccess(),a.isDeleteRows){var Y=e(t).find(".delete_rows");Y.bind("click",function(){var t=e(this).parents("tr").attr("filedId");a.onDelete&&e.isFunction(a.onDelete)&&a.onDelete(t)})}}else{var Z='<tr><td style="text-align: center" colspan="'+r.length+'">暂无数据，请添加商品！</td></tr>';e(n).append(Z)}var ee=e(t).data("setting")?e(t).data("setting"):a;ee.pageParams.rows=10,ee.pageParams.page=0,e(t).data("setting",ee)}else{var Z='<tr><td style="text-align: center" colspan="'+r.length+'">暂无数据，请添加商品！</td></tr>';e(n).append(Z)}}},reload:function(t){var a=t.table_selector;e(a).dataTable(t)},loadLocalData:function(t,a){var r=t.table_selector;e(r).dataTable(t)},getSelected:function(t){var a=t.table_selector,r=e(a).find(".choice-box-yes");if(r.length>1||0==r.length);else{var i=e(r[0]).parents("._summary").attr("filedId"),l=t.rowsObjs;for(var n in l)if(l[n][t.filedId]==i)return l[n]}},getSelections:function(t){for(var a=t.table_selector,r=t.rowsObjs,i=e(a).find(".choice-box-yes"),l=[],n=0;n<i.length;n++){var d=e(i[n]).parents("._summary").attr("filedId");for(var s in r)r[s][t.filedId]==d&&l.push(r[s])}return l},getRow:function(e,t){var a,r=(e.table_selector,e.rowsObjs);for(var i in r)if(r[i][e.filedId]==t)return a=r[i]},getRows:function(e){return e.rowsObjs},getRowsNumber:function(t){var a=t.table_selector,r=e(a).find(".choice-box-yes"),i=r.length;return i},getPager:function(){},selectRow:function(e,t){},selectionRow:function(t,a){var r=t.table_selector;if(a&&a.length>0)for(var i=0;i<a.length;i++){var l=a[i].id;e(r).find("tbody").find("tr._summary").filter("[filedId='"+l+"']").addClass("choice-box-yes")}},selectAll:function(t,a){var r=t.table_selector;e(r).find("tbody").find(".check_box").addClass("choice-box-yes")},cancelSelectAll:function(t,a){var r=t.table_selector;e(r).find("tbody").find(".check_box").removeClass("choice-box-yes")},endEditor:function(t,a){var r=t.table_selector;e(r).find("tbody").find("tr._summary").find("td").filter("[edit='true']")},sessionData:function(e,t){},getEditRowData:function(t,a){var r=t.table_selector,i=e(r).find("tbody").find("tr._summary"),l=t.rowsObjs,n=[];if(i&&i.length>0){for(var d=0;d<i.length;d++)if(l&&l.length>0)for(var s=0;s<l.length;s++)if(e(i[d]).attr("filedId")==l[s].id){var o=e(i[d]).find("td").filter("[edit='true']");if(o&&o.length>0){for(var f=0;f<o.length;f++){var p=e(o[f]).find("input").attr("name"),g=e(o[f]).find("input").val();l[s][p]=g}n.push(l[s])}}return n}},deleteRowById:function(t,a){var r=t.table_selector,i=a;e(r).find("tr._summary").filter("[filedId='"+i+"']").remove()}},gridPage:{page_template:'<td colspan="2" class="tl table-page-txt total">共 0 条数据</td><td  class="tr table-page-list pageDiv"><ul class="clearfix"><li class="first_li"><span class="icon left " onclick="$.gridPage.prevPage(this)"></span></li><li class="last_li"><span class="icon right " onclick="$.gridPage.nextPage(this)"></span></li></ul></td>',page_omitted:'<li class="center_li"><span class="center is_center">...</span></li>',create_empty_page:function(e){},init_pageTemplate:function(t,a,r,i,l){var n=e(t).find(".pageDiv");n.length>0&&e(n).remove(),n=e.gridPage.page_template,e(t).find("._tfoot").append(n),l>4?e(t).find(".pageDiv").attr("colspan",l-2):(e(t).find(".total").attr("colspan",1),e(t).find(".pageDiv").attr("colspan",l-1)),e.gridPage.page(t,a,r,i)},page:function(t,a,r,i){var l=e(t).find(".pageDiv");e(t).find(".total").text("共 "+a+" 条数据"),l.data("is_center","false");var n=0;r>=a?(n+=1,l.find(".first_li").after("<li pageId='page0'><span  pageValue='1' class='pageA' onclick='$.gridPage.clickPage(this)'>1</span></li>")):a%r==0?(n=a/r,e.gridPage.paging(l,n)):(n=Math.ceil(a/r),e.gridPage.paging(l,n)),i=i?i:1;var d=l.find("[pageValue='"+i+"']");e(d).addClass("current"),e(d).attr("pgSelect","true"),"true"==e(l).data("is_center")&&e.gridPage.pageOperate(l,d,i)},paging:function(t,a){if(a>5){t.data("is_center","true");for(var r=1;a>=r;r++)if(1==r)t.find(".first_li").after("<li pageId='page"+r+"' class='page_li'><span  pageValue='"+r+"'  class='pageA' onclick='$.gridPage.clickPage(this)'>"+r+"</span></li>");else{var i=r-1;r>5&&r<parseInt(parseInt(a)-1)?t.find("[pageId='page"+i+"']").after("<li pageId='page"+r+"' style='display:none' class='page_li'><span  pageValue='"+r+"'  class='pageA pageHide' onclick='$.gridPage.clickPage(this)' >"+r+"</span></li>"):t.find("[pageId='page"+i+"']").after("<li pageId='page"+r+"' class='page_li'><span  pageValue='"+r+"'  class='pageA' onclick='$.gridPage.clickPage(this)' >"+r+"</span></li>")}var l=t.find("[pageId='page"+parseInt(parseInt(a)-2)+"']");e(l).is(":hidden")&&e(l).after(e.gridPage.page_omitted)}else for(var r=1;a>=r;r++)if(1==r)t.find(".first_li").after("<li pageId='page"+r+"' class='page_li'><span  pageValue='"+r+"'  class='pageA' onclick='$.gridPage.clickPage(this)'>"+r+"</span></li>");else{var i=r-1;t.find("[pageId='page"+i+"']").after("<li pageId='page"+r+"' class='page_li'><span  pageValue='"+r+"'  class='pageA' onclick='$.gridPage.clickPage(this)' >"+r+"</span></li>")}},clickPage:function(t){if("true"==e(t).attr("pgSelect"))return!1;var a=e(t).parents(".pageDiv"),r=e(a.find(".pageA"));r.each(function(t,a){e(a).removeClass("current"),e(a).attr("pgSelect","false")}),e(t).attr("pgSelect","true");var i=e(t).attr("pageValue");e(t).addClass("current"),e.gridPage.gridPageSearch(t,i)},prevPage:function(t){var a=e(t).parents(".pageDiv"),r=e(a.find(".pageA"));r.each(function(a,r){e(r).removeClass("current");var i=e(r).attr("pgSelect");if("true"==i){var l=e(r).attr("pageValue");if("1"==l)return e(r).addClass("current"),!1;var n=e(r).parent().prev().find("a");return e(n).addClass("current"),e(n).attr("pgSelect","true"),e(r).attr("pgSelect","false"),e.gridPage.gridPageSearch(t,parseInt(l)-1),!1}})},nextPage:function(t){var a=e(t).parents(".pageDiv"),r=e(a.find(".pageA"));r.each(function(a,r){e(r).removeClass("current");var i=e(r).attr("pgSelect");if("true"==i){var l=e(r).parent().next();if(l.hasClass("center_li")){if(void 0==l.next().attr("pageId"))return e(r).addClass("current"),!1}else if(void 0==l.attr("pageId"))return e(r).addClass("current"),!1;var n=e(r).attr("pageValue"),d=e(r).parent().next().find("a");return e(d).addClass("current"),e(d).attr("pgSelect","true"),e(r).attr("pgSelect","false"),e.gridPage.gridPageSearch(t,parseInt(n)+1),!1}})},gridPageSearch:function(t,a,r){var i=parseInt(r?r:10),l=e(t).parents(".pageDiv"),n=e(l).parents("table").attr("id");e("#"+n).data("isPage",!0),e("#"+n).dataTable({pageParams:{page:a,rows:i}})},pageOperate:function(t,a,r,i){var l=e(a).parents(".pageDiv");if("true"==e(l).data("is_center")){e(t).data("paging","true");var n=e(a).parent("li"),d=e(n).next(".page_li"),s=e(n).prev(".page_li"),o=e(l).find("li").filter(".page_li");if(r>=5){e(a).is(":hidden")&&e(n).show();var f=parseInt(parseInt(r)+1);e(d).is(":hidden")&&e(d).show(),e(d).next("li").is(":hidden")&&e(d).next("li").show();var p=e(o).filter(".page_li:lt("+parseInt(o.length-2)+"):gt("+f+")");p&&p.length>0&&e(p).hide(),e(o).eq(parseInt(o.length-3)).is(":visible")&&e(l).find("[pageid='page"+parseInt(o.length-1)+"']").prev(".center_li").hide(),e(s)&&e(s).length>0?(e(s).is(":hidden")&&e(s).show(),e(s).prev("li").is(":hidden")&&e(s).prev("li").show()):e(n).prev("li").hasClass("center_li")&&(s=e(n).prev("li").prev(".page_li"),e(s).is(":hidden")&&e(s).show(),e(s).prev("li").is(":hidden")&&e(s).prev("li").show(),e(s).prev("li").prev("li").is(":hidden")?(e(n).prev("li").remove(),e(s).prev("li").before(e.gridPage.page_omitted)):e(n).prev("li").remove());var g=parseInt(parseInt(r)-3),c=e(o).filter(".page_li:lt("+g+"):gt(1)");parseInt(r)<parseInt(o.length-1)&&c&&c.length>0&&(e(c).hide(),e(l).find("[pageid='page2']").after(e.gridPage.page_omitted))}}}}})}(jQuery);
